<script>
	'use strict';

	window.Cosmoz = window.Cosmoz || {};


	/* eslint-disable no-unused-vars */

	/**
	 * Cosmoz.Tree
	 *
	 * @constructor
	 */
	Cosmoz.Tree = function () {
		if (this.constructor === Cosmoz.Tree) {
			throw new Error('abstract');
		}
	};

	Cosmoz.Tree.prototype = {
		getNodeByProperty: function (propertyName, propertyValue) {
			throw new Error('Must be implemented in derived object');
		},

		getPath: function (node) {
			throw new Error('Must be implemented in derived object');
		},

		getPathByProperty: function (propertyName, propertyValue) {
			throw new Error('Must be implemented in derived object');
		},

		getChildren: function (node) {
			throw new Error('Must be implemented in derived object');
		},

		getProperty: function (node, propertyName) {
			throw new Error('Must be implemented in derived object');
		},

		getPathString: function (node, textPropertyName, separator) {
			var path = this.getPath(node);
			return path.map(function (n) {
				return this.getProperty(n, textPropertyName);
			}, this).join(separator);
		},

		getPathStringByProperty: function (propertyName, propertyValue, textPropertyName, separator) {
			var node = this.getNodeByProperty(propertyName, propertyValue);
			if (node !== undefined) {
				return this.getPathString(node, textPropertyName, separator);
			}
		},

		/**
		 * Basic search for a node by one of its property
		 */
		search: function (node, propertyName, propertyValue) {
			if (this.getProperty(node, propertyName) === propertyValue) {
				return node;
			}

			var children = this.getChildren(node),
				i = 0,
				n;

			if (children) {
				for (i = 0; i < children.length; i+=1) {
					n = this.search(children[i], propertyName, propertyValue);
					if (n !== undefined) {
						return n;
					}
				}
			}
		}
	};
</script>
